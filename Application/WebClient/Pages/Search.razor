@page "/search"

@using Blazor.Heroicons.Outline;
@using Ð¡odem.Shared.Dtos.Snippet

<PageTitle>Codem - Search</PageTitle>

<div class="mx-auto mb-4 mt-16 w-full max-w-4xl">
  <div class="w-full px-4 text-center">
    <div
      class="mx-auto flex h-8 w-full max-w-lg items-center gap-2 overflow-hidden rounded-md border border-black/[.1] bg-white px-1 dark:bg-neutral-950 dark:border-white/[.15]"
    >
      <label class="w-full">
        <input
          type="text"
          @bind="SearchQuery"
          @onkeyup="RedirectToSearch"
          placeholder="Search by name..."
          class="h-full w-full pl-1 text-sm bg-transparent border-none focus1:outline-none focus:ring-0"
        />
      </label>
      <a href="@(string.IsNullOrEmpty(SearchQuery) ? "/search" : $"/search?searchQuery={SearchQuery}")">
        <button
          type="button"
          @onclick="UpdateFilteredList"
          class="flex h-6 items-center gap-2 rounded-md border border-black/[.1] bg-sky-400 px-2 hover:bg-sky-500"
        >
          <p class="text-xs text-white">Search</p>
          <MagnifyingGlassIcon class="h-3 w-3 text-white" />
        </button>
      </a>
    </div>
  </div>
  <p class="my-4 px-4 text-2xl font-semibold text-slate-800 dark:text-neutral-200">
    Code snippets
  </p>
  <ul class="my-4 flex h-full w-full flex-col px-2">
    @foreach (SnippetDto snippet in SnippetList)
    {
      <li>
        <SearchItem
          Id="@snippet.Id"
          Author="Ap73MKa"
          Code="@getFirstFileCode(snippet)"
          Syntax="Python"
          Title="@snippet.Name"
          PublicDate="DateOnly.FromDateTime(DateTime.Now)"/>
      </li>
    }
  </ul>
</div>